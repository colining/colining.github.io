<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>colin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="colin">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="colin">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="colin">
  
    <link rel="alternative" href="/atom.xml" title="colin" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/0.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">任天起</a></h1>
		</hgroup>

		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/colining" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/ren-tian-qi" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">任天起</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/0.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">任天起</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/colining" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/ren-tian-qi" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-原-Android-Looper，handler，HandlerThread" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/28/原-Android-Looper，handler，HandlerThread/">Android Looper，handler，HandlerThread</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#1<br>上回书说道，掌柜的饿了，叫大厨做饭去了；但一家客栈如果不冷清的话，就会有很多客人；跑堂的小二问完客观，记下来，会跟大厨喊：两斤酱牛肉，两斤烤鸭；至于茶水，跑堂的自己端过去就行了；那掌柜的是不是得记账啊；所以更可能的情况是小二用纸笔记下来，一份送到掌柜的，一份送到大厨那里；掌柜的可能就直接收起来，等晚些时候记账也行，大厨就不一样了，那就是铁定的任务了；看完这个消息，做个鱼香肉丝，再看哪个，做个清蒸红薯之类的。。。<br>相关访问，一定要看的；<br><a href="http://www.cnblogs.com/codingmyworld/archive/2011/09/14/2174255.html" target="_blank" rel="external">http://www.cnblogs.com/codingmyworld/archive/2011/09/14/2174255.html</a></p>
<p>#2<br>    主程序:可以看成是客栈的整个大堂，人来人往，小二忙的不亦乐乎<br>    线程：大厨做饭得有锅啊；但是此时的锅只能做一道菜，做完就不能用了，大厨就把它藏起来了；之后来的n多单子不接受；<br>    looper：掌柜的一看，说这不行啊，加钱！让锅一直待在厨房，有单子就炒菜，没有就等着单子的到来；于是线程就升级为循环线程；<br>    Message：小二递过来的单子<br>    MessageQueue：虽然大厨是处于循环工作状态，但是那么多单子总得有个序列吧，此处将单子排序，大厨就可以按照次序<br>    Handler：大厨，关键人物，小二将单子交给大厨，到了厨房，大厨就将其放入消息队列，到了的话，就炒菜；<br>    那假如客栈大，厨师好多，一个相同的消息队列 不同的菜交给不同厨师，一个厨师可以对应好几道菜，不过的按照顺序吵；</p>
<p>#3<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThumbnailDownloader</span>&lt;<span class="title">Token</span>&gt; <span class="keyword">extends</span> <span class="title">HandlerThread</span> </span>&#123; <span class="comment">//线程</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhotoGallleryFargment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123; <span class="comment">//主线程</span></div><div class="line">   ThumbnailDownloader&lt;ImageView&gt; thumbnailDownloader;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle s)</span></span></div><div class="line">    &#123;</div><div class="line">		thumbnailDownloader.start();          <span class="comment">//启动线程</span></div><div class="line">        thumbnailDownloader.getLooper();      <span class="comment">//升级线程,与looper进行关联</span></div><div class="line">        Log.i(TAG,<span class="string">"Background thread started"</span>);</div><div class="line"></div><div class="line">    &#125;    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span>             <span class="comment">//别忘了关闭线程</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onDestroy();</div><div class="line">        thumbnailDownloader.quit();</div><div class="line">        Log.i(TAG,<span class="string">"background thread destroy"</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThumbnailDownloader</span>&lt;<span class="title">Token</span>&gt; <span class="keyword">extends</span> <span class="title">HandlerThread</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span>  <span class="keyword">static</span>  <span class="keyword">final</span>  String TAG = <span class="string">"ThumbnailDownloader"</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span>  <span class="keyword">final</span>  <span class="keyword">int</span> MESSAGE_DOWNLOAD=<span class="number">0</span>;</div><div class="line"></div><div class="line">    Handler handler;</div><div class="line">    Map&lt;Token,String&gt; requestMap = Collections.synchronizedMap(<span class="keyword">new</span> HashMap&lt;Token, String&gt;());</div><div class="line">    </div><div class="line">    <span class="meta">@SuppressLint</span>(<span class="string">"HandlerLeak"</span>)</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span>  <span class="keyword">void</span> <span class="title">onLooperPrepared</span><span class="params">()</span>             <span class="comment">//looper的准备方法哦,调用于第一次消息队列检查之前</span></span></div><div class="line">    &#123;</div><div class="line">        handler = <span class="keyword">new</span> Handler()                   <span class="comment">//创建handler</span></div><div class="line">        &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span><span class="comment">//处理message 由于handler本就创建于looerPrepared ，就省去消息发送的环节；</span></span></div><div class="line">            &#123;</div><div class="line">                <span class="keyword">if</span>(msg.what == MESSAGE_DOWNLOAD)</div><div class="line">                &#123;</div><div class="line">                    <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">                    Token token =(Token)msg.obj;</div><div class="line">                    Log.i(TAG,<span class="string">"got to request for url :"</span>+ requestMap.get(token));</div><div class="line">                    handleRequest(token);</div><div class="line"></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">   </div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">queueThumbnail</span><span class="params">(Token token ,String url)</span></span></div><div class="line">    &#123;</div><div class="line">        Log.i(TAG,<span class="string">"Got to url :"</span>+url);</div><div class="line">        requestMap.put(token,url);</div><div class="line">        handler</div><div class="line">                .obtainMessage(MESSAGE_DOWNLOAD,token)</div><div class="line">                .sendToTarget();</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">private</span>  <span class="keyword">void</span>  <span class="title">handleRequest</span><span class="params">(<span class="keyword">final</span> Token token)</span>  <span class="comment">//处理发送过来的token，完成</span></span></div><div class="line">    &#123;....&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cleanQueue</span><span class="params">()</span></span></div><div class="line">    &#123;....&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<pre><code>现在完成的是什么呢？大厨自己想吃东西了，所以就自己在消息队列中加了一个单子，自己做；
</code></pre><p>#4<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span>           <span class="comment">//主程序将handler传递给线程,</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle s)</span></span></div><div class="line">  &#123;</div><div class="line">      <span class="keyword">super</span>.onCreate(s);</div><div class="line">      setRetainInstance(<span class="keyword">true</span>);</div><div class="line">      <span class="keyword">new</span> FetchItemsTask().execute();</div><div class="line">      thumbnailDownloader = <span class="keyword">new</span> ThumbnailDownloader&lt;ImageView&gt;(<span class="keyword">new</span> Handler());<span class="comment">//Handler()方法就近关联looper，所以关联至主程序的looper；将其通过构造函数传递给线程</span></div><div class="line">      thumbnailDownloader.setListener(<span class="keyword">new</span> ThumbnailDownloader.Listener&lt;ImageView&gt;() &#123;...通过listener，</div><div class="line">          &#125;</div><div class="line">      &#125;);</div><div class="line"></div><div class="line">      thumbnailDownloader.start();</div><div class="line">      thumbnailDownloader.getLooper();</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>线程添加如下</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">Handler responsehandler;</div><div class="line">  ThumbnailDownloader.Listener&lt;Token&gt; mlistener;</div><div class="line"></div><div class="line">  <span class="keyword">public</span>  <span class="class"><span class="keyword">interface</span>  <span class="title">Listener</span>&lt;<span class="title">Token</span>&gt;</span></div><div class="line">  &#123;</div><div class="line">      <span class="function"><span class="keyword">void</span> <span class="title">onThumbnailDownloaded</span><span class="params">(Token token,Bitmap thumbnail)</span></span>;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span>  <span class="title">setListener</span><span class="params">(Listener&lt;Token&gt; listener)</span></span></div><div class="line">  &#123;</div><div class="line">      mlistener=listener;</div><div class="line">  &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ThumbnailDownloader</span><span class="params">(Handler responsehandler)</span><span class="comment">//构造函数</span></span></div><div class="line">  &#123;</div><div class="line">      <span class="keyword">super</span>(TAG);</div><div class="line">      <span class="keyword">this</span>.responsehandler=responsehandler;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(<span class="keyword">final</span> Token token)</span></span></div><div class="line">  &#123;</div><div class="line">  ....</div><div class="line">   responsehandler.post(<span class="keyword">new</span> Runnable() &#123;                <span class="comment">//传说中的handler的信息发送；由于responhandler关联到的是主程序的looper，所以信息也自然发送到主线程，于是我们就在线程中改变了主线程的UI 哈哈；</span></div><div class="line"></div><div class="line">              <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">                  <span class="keyword">if</span>(requestMap.get(token)!=url)</div><div class="line">                      <span class="keyword">return</span>;</div><div class="line"></div><div class="line">                  requestMap.remove(token);</div><div class="line">                  mlistener.onThumbnailDownloaded(token,bitmap);</div><div class="line">              &#125;</div><div class="line">          &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/28/原-Android-Looper，handler，HandlerThread/" class="archive-article-date">
  	<time datetime="2016-09-28T11:44:49.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-28</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/线程/">线程</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-Android-线程AsyncTask" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/28/原-Android-线程AsyncTask/">Android 线程AsyncTask</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##1.AsyncTask<br>Android已经到了最后阶段，突然蹦出来线程这一难题，真的是把我弄晕了<br>首先我们明确为什么存在线程？ 我们已经存在一个主程序，为什么要加一个呢？当我们的程序在请求网络时，我们希望主程序还可以运行吗？现在的程序一般都是后台下载，那前台下载你见过吗？点完下载，程序就变成下载的进度条了，软件不能用了；这样当然是不好的，所以才有了线程；</p>
<p>就像是一个客栈，有大厨，有掌柜的，有跑堂的；如果说这家客栈就一个人，那是不是就忙不过来了呢；</p>
<p>我们要看的程序是一个从网站获取链接与信息的程序；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">	 <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilckrFetchr</span> </span>&#123;<span class="comment">//网络连接相关代码，不是今天重点</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PhotoGallleryFargment</span> <span class="keyword">extends</span> <span class="title">Fragment</span></span>&#123;</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle s)</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(s);</div><div class="line">        setRetainInstance(<span class="keyword">true</span>);</div><div class="line">	    <span class="keyword">new</span> FetchItemsTask().execute();<span class="comment">//在此处开启线程</span></div><div class="line">        &#125;</div><div class="line"> <span class="keyword">private</span>  <span class="class"><span class="keyword">class</span>  <span class="title">FetchItemsTask</span> <span class="keyword">extends</span> <span class="title">AsyncTask</span>&lt;<span class="title">Void</span>,<span class="title">Void</span>,<span class="title">ArrayList</span>&lt;<span class="title">GalleryItem</span>&gt;&gt;//主程序中的内部类，线程类</span></div><div class="line">    &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> ArrayList&lt;GalleryItem&gt; <span class="title">doInBackground</span><span class="params">(Void... params)</span></span></div><div class="line">        &#123;</div><div class="line"><span class="comment">//            try		//此处获取百度的THML</span></div><div class="line"><span class="comment">//            &#123;</span></div><div class="line"><span class="comment">//                String result = new FilckrFetchr().geturl("http://www.baidu.com");</span></div><div class="line"><span class="comment">//                Log.i(TAG , "Fetched contents of URL: "+result);</span></div><div class="line"><span class="comment">//                Log.d(TAG,"LALALALALALAL");</span></div><div class="line"><span class="comment">//            &#125;catch (IOException io)</span></div><div class="line"><span class="comment">//            &#123;</span></div><div class="line"><span class="comment">//                Log.e(TAG, "Failed to fetch URL "+io);</span></div><div class="line"><span class="comment">//            &#125;</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> FilckrFetchr().fetchItems();<span class="comment">//调用网络连接,获取items</span></div><div class="line"></div><div class="line">        &#125;</div><div class="line">         <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPostExecute</span><span class="params">(ArrayList&lt;GalleryItem&gt; items)</span></span></div><div class="line">        &#123;</div><div class="line">            mitems = items;</div><div class="line">            setupAdapter();<span class="comment">//当doInBackground有返回值时，onPostExecute执行，就可以改变主线程的视图了；</span></div><div class="line">        &#125;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<p>是不是很简单。就像是掌柜的饿了，让大厨做饭去了；大厨做完端过来，掌柜的就可以吃了；大厨做饭的时候，掌柜的就可以想干嘛干嘛；</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/28/原-Android-线程AsyncTask/" class="archive-article-date">
  	<time datetime="2016-09-28T08:20:43.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-28</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/线程/">线程</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-标题栏-层级导航" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/原-标题栏-层级导航/">标题栏 层级导航</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##1<br>最初我们的标题栏导航是怎样的呢？</p>
<p>点击标题栏按钮，触发事件，创建一个Intent ，打开新页面；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(getActivity(),CrimePagerActivity.class);</div><div class="line">intent.putExtra(CrimeFragment.EXTRA_CRIME_ID,crime.getmId());</div><div class="line">startActivityForResult(intent,<span class="number">0</span>);</div></pre></td></tr></table></figure></p>
<p>Intent？我们知道用Intent可以随便打开那个页面，那么这种导航就没有明确的父子关系，且必须知道要去哪里；简单地说，小李坐车去女朋友家，司机说：“我知道你女朋友在那里，上车” 实际上去哪里，是司机说的算；</p>
<p>##2<br>下面就定义了父子关系<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">".Activity.CrimePagerActivity"</span></span></div><div class="line">    <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">"android.support.PARENT_ACTIVITY"</span></span></div><div class="line">        <span class="attr">android:value</span>=<span class="string">".Activity.CrimeListActivity"</span>&gt;<span class="tag">&lt;/<span class="name">meta-data</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>控制层表示说，你，想想你有亲戚没？有的话，找你亲戚去；控制层就不需要要去哪里；父子关系是activity自己的属性；当父子关系改变时，控制层不会变化；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>(NavUtils.getParentActivityName(getActivity())!=<span class="keyword">null</span>)</div><div class="line">                  NavUtils.navigateUpFromSameTask(getActivity());</div></pre></td></tr></table></figure></p>
<p>简单说：你找女朋友，司机问你：有吗？在哪儿呢；你一说，司机就把你送走；你女朋友一天变一个，司机也能找到位置；</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/24/原-标题栏-层级导航/" class="archive-article-date">
  	<time datetime="2016-09-24T08:44:04.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-样式与include" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/原-样式与include/">样式与include</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#1<br>简单来说样式是为了复用;</p>
<p>style 中创建样式<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"RemoteButton"</span>&gt;</span><span class="xml"></span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_width"</span>&gt;</span>0dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_height"</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColor"</span>&gt;</span>#556699<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textSize"</span>&gt;</span>20dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span> = <span class="string">"android:layout_margin"</span>&gt;</span>3dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"></div><div class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>控件使用某种样式；<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">TableRow</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">   &gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">style</span>=<span class="string">"@style/RemoteButton"</span>/&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">style</span>=<span class="string">"@style/RemoteButton"</span>/&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">style</span>=<span class="string">"@style/RemoteButton"</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">TableRow</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>样式呢，就是为了批量的定义某类具有相同属性的控件；比如说现在有十二个按钮，属性相同；那就给他们同一种style；当属性值很多时，就节省了很多代码；</p>
<p>但就算这样我们还是要写12个按钮：</p>
<p>#2<br>通过使用include 我们就可以一次引入多个button<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">include</span></span></div><div class="line">    <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></div><div class="line">    <span class="attr">layout</span>=<span class="string">"@layout/button_row"</span>&gt;<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>一次就引入了三个button，当然我们也可以引入其他一些奇形怪状的布局；include将其作为一种控件，还可以添加一些有关位置的属性；</p>
<p>#3<br>样式的继承<br>通过在style中加入 parent 确定继承关系<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"RemoteButton"</span>&gt;</span><span class="undefined">...</span></div><div class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"new_button"</span> <span class="attr">parent</span>=<span class="string">"RemoteButton"</span></span></div><div class="line">       &gt;<span class="xml"></span></div><div class="line">      <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textStyle"</span>&gt;</span>bold<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>或者：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"RemoteButton.new_button"</span>&gt;</span><span class="xml"></span></div><div class="line">        <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textColor"</span>&gt;</span>#FF0000<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/24/原-样式与include/" class="archive-article-date">
  	<time datetime="2016-09-24T08:15:17.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-JSON数据保存与加载" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/24/原-JSON数据保存与加载/">JSON数据保存与加载</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先我们盘点一下参与者</p>
<p>Crime 罪犯类，<br>CrimeLab 罪犯列表类<br>CriminalIntentJSONSerializer 罪犯json化 并且保存</p>
<p>没有视图也没有控制的事 三个模型类玩游戏</p>
<p>保存和加载自然归CriminalIntentJSONSerializer管理<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CriminalIntentJSONSerializer</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Context context;</div><div class="line">    <span class="keyword">private</span> String Filename;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CriminalIntentJSONSerializer</span><span class="params">(Context c, String f)</span></span></div><div class="line">    &#123;</div><div class="line">        context = c;</div><div class="line">        Filename = f;</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveCrimes</span><span class="params">(ArrayList&lt;Crime&gt; crimes)</span> <span class="keyword">throws</span> JSONException,IOException</span></div><div class="line">    &#123;....&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;Crime&gt; <span class="title">loadCrimes</span><span class="params">()</span> <span class="keyword">throws</span>  IOException,JSONException</span></div><div class="line">    &#123;....&#125;</div></pre></td></tr></table></figure></p>
<p>将crime自己变成JSON 和将JSON 变成crime自然是Crime自己的事情喽<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Crime</span> <span class="keyword">extends</span> <span class="title">android</span>.<span class="title">text</span>.<span class="title">format</span>.<span class="title">DateFormat</span></span>&#123;<span class="comment">//罪犯类 以及罪犯所携带的数据</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> JSONObject <span class="title">toJSON</span><span class="params">()</span><span class="keyword">throws</span> JSONException</span></div><div class="line">    &#123;</div><div class="line">        JSONObject jsonObject = <span class="keyword">new</span> JSONObject();</div><div class="line">        jsonObject.put(JSON_ID,mId.toString());</div><div class="line">        jsonObject.put(JSON_TITLE,mTitle);</div><div class="line">        jsonObject.put(JSON_SOLVED,mSolved);</div><div class="line">        jsonObject.put(JSON_DATE,mDate.getTime());</div><div class="line">        <span class="keyword">if</span>(photo!=<span class="keyword">null</span>)</div><div class="line">            jsonObject.put(JSON_PHOTO,photo.toJSON());</div><div class="line"></div><div class="line">        <span class="keyword">return</span> jsonObject;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Crime</span><span class="params">(JSONObject jsonObject)</span> <span class="keyword">throws</span>  JSONException</span></div><div class="line">    &#123;</div><div class="line">        mId = UUID.fromString(jsonObject.getString(JSON_ID));</div><div class="line">        <span class="keyword">if</span>(jsonObject.has(JSON_TITLE))</div><div class="line">        &#123;</div><div class="line">            mTitle=jsonObject.getString(JSON_TITLE);</div><div class="line"></div><div class="line">        &#125;</div><div class="line">        mSolved=jsonObject.getBoolean(JSON_SOLVED);</div><div class="line">        mDate = <span class="keyword">new</span> Date(jsonObject.getLong(JSON_DATE));</div><div class="line"></div><div class="line">        <span class="keyword">if</span>(jsonObject.has(JSON_PHOTO))</div><div class="line">            photo = <span class="keyword">new</span> Photo(jsonObject.getJSONObject(JSON_PHOTO));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那剩下那个干嘛呢？<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrimeLab</span></span></div><div class="line">&#123;</div><div class="line">  </div><div class="line">    <span class="keyword">private</span> CriminalIntentJSONSerializer criminalIntentJSONSerializer;</div><div class="line"></div><div class="line">   <span class="comment">// private  Context Appcontext;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">   </div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">saveCrimes</span><span class="params">()</span></span></div><div class="line">    &#123;</div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line"></div><div class="line">            criminalIntentJSONSerializer.saveCrimes(crimes);</div><div class="line">            Log.d(TAG,<span class="string">"crimes saved to file"</span>);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">catch</span> (Exception e)</div><div class="line">        &#123;</div><div class="line">            Log.e(TAG,<span class="string">"Error saving criems;"</span>,e);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>CrimeLab  负责将crime批量传输到CriminalIntentJSONSerializer，然后每一个crime调用自己的toJSON方法，最后保存起来；</p>
<p>加载的时候，每一个crime都直接调用自己的初始化方法。从JSON拿到数据；</p>
<p>是不是很清楚的；</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/24/原-JSON数据保存与加载/" class="archive-article-date">
  	<time datetime="2016-09-24T08:01:15.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-mvc与音频播放" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/19/原-mvc与音频播放/">mvc与音频播放</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>mvc<br>m：模型<br>v ：视图<br>c ：控制</p>
<p>模型层，可以粗略理解为是属于纯纯的类，绝不与v层有任何关系，就音频播放来说，音频是数据，绝对是属于m层，那么相对应的就有一些控制音频的方法；模型层最接近于java里面的类；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AudioPlayer</span> </span>&#123;			<span class="comment">//音频播放器和管理它的方法</span></div><div class="line">    <span class="keyword">private</span> MediaPlayer player;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;...&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">(Context c)</span></span></div><div class="line">    &#123;...&#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pause</span><span class="params">()</span></span></div><div class="line">    &#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>v层 视图层，主要用于展现视图，有页面，以xml为例，不管有没有人用，都是一个页面，fragment加载就叫做fragment ，activity加载就叫做activity；</p>
<p>c层，最麻烦的一层，我们非常容易的能够看见c层有一大堆的代码，而且都是必须的；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123; <span class="comment">//加载xml页面,此处是activity，fragment一布局形式加入activity中</span></div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_hello_moon);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloMoonFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> Button playbutton;</div><div class="line">    <span class="keyword">private</span>  Button stopbutton;</div><div class="line">    <span class="keyword">private</span>  Button pausebutton;</div><div class="line">    <span class="keyword">private</span>  AudioPlayer player = <span class="keyword">new</span> AudioPlayer();</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle s)</span></span></div><div class="line">    &#123;....&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup parent, Bundle s)</span></span></div><div class="line">    &#123;...&#125;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span></span></div><div class="line">    &#123;...&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>控制层是连接视图和模型的桥梁；视图中的控件都是死的，只有通过控制层与某些方法连接起来，才能生动，比如说：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span>  Button pausebutton;     <span class="comment">//将视图中的button拿了出来，将它的点击事件与 player.pause();关联起来；</span></div><div class="line"> pausebutton =(Button)v.findViewById(R.id.hello_pauseButton);</div><div class="line">      pausebutton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</div><div class="line">          <span class="meta">@Override</span></div><div class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">              player.pause();</div><div class="line">          &#125;</div><div class="line">      &#125;);</div></pre></td></tr></table></figure></p>
<p>当然，除了基本的关联，还有对生命周期中调用各种方法；<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span>  <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle s)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(s);</div><div class="line">    setRetainInstance(<span class="keyword">true</span>);    <span class="comment">//保证其旋转屏幕时fragment不重启，保留fragment</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="https://asce1885.gitbooks.io/android-rd-senior-advanced/content/life.jpg" alt="这里写图片描述"></p>
<p>注意两点onAttach(),onDetach();<br>            onCreate(),onCreateView();<br>第一点：fragment的保留，然后重新加载视图；</p>
<p>第二点：onCreate() 和onCreateView()是有显著区别的；<br>只有当View已经加载，我们才能找到视图上的某一个button，而onCreate()方法则是用来初始化除View以外的其他内容的<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pausebutton =(Button)v.findViewById(R.id.hello_pauseButton);</div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/19/原-mvc与音频播放/" class="archive-article-date">
  	<time datetime="2016-09-19T08:33:06.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-19</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mvc/">mvc</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-Fragment的实现方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/19/原-Fragment的实现方案/">Fragment的实现方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Fragment与Activity有几种方式，今天讲上一讲</p>
<p>##1</p>
<p>xml 布局fragment</p>
<p>很简单，我们先造好fragment 然后再在activity的xml文件中加入<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">TableLayout</span> //这个是<span class="attr">fragment</span></span></div><div class="line"><span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span> <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</div><div class="line">    </div><div class="line"><span class="tag">&lt;/<span class="name">TableLayout</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;   //这个是activity的xml，此处直接将fragment拿过来以fragment形式放在activity里</div><div class="line"><span class="tag">&lt;<span class="name">fragment</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/hellomoonFragment"</span></div><div class="line">    <span class="attr">android:name</span>=<span class="string">"com.example.asus.hellomoon.HelloMoonFragment"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line"></div><div class="line">    &gt;<span class="tag">&lt;/<span class="name">fragment</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloMoonActivity</span> <span class="keyword">extends</span> <span class="title">FragmentActivity</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_hello_moon); <span class="comment">//直接添加activity ，activity会自己把fragment添加过来；</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##2<br>动态添加：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span>  </span></div><div class="line">    &#123;  </div><div class="line">        FragmentManager fm = getFragmentManager();  </div><div class="line">        <span class="comment">// 开启Fragment事务  </span></div><div class="line">        FragmentTransaction transaction = fm.beginTransaction();  </div><div class="line">  </div><div class="line">        <span class="keyword">switch</span> (v.getId())  </div><div class="line">        &#123;  </div><div class="line">        <span class="keyword">case</span> R.id.tab_bottom_weixin:  </div><div class="line">            <span class="keyword">if</span> (mWeixin == <span class="keyword">null</span>)  </div><div class="line">            &#123;  </div><div class="line">                mWeixin = <span class="keyword">new</span> ContentFragment();  </div><div class="line">            &#125;  </div><div class="line">            <span class="comment">// 使用当前Fragment的布局替代id_content的控件  </span></div><div class="line">            transaction.replace(R.id.id_content, mWeixin);  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        <span class="keyword">case</span> R.id.tab_bottom_friend:  </div><div class="line">            <span class="keyword">if</span> (mFriend == <span class="keyword">null</span>)  </div><div class="line">            &#123;  </div><div class="line">                mFriend = <span class="keyword">new</span> FriendFragment();  </div><div class="line">            &#125;  </div><div class="line">            transaction.replace(R.id.id_content, mFriend);  </div><div class="line">            <span class="keyword">break</span>;  </div><div class="line">        &#125;  </div><div class="line">        <span class="comment">// transaction.addToBackStack();  </span></div><div class="line">        <span class="comment">// 事务提交  </span></div><div class="line">        transaction.commit();  </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>利用FragmentManager 动态添加目标xml作为fragment</p>
<p>##3超级震撼的小技巧<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleFragmentActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">protected</span>  <span class="keyword">abstract</span>  Fragment <span class="title">createFragment</span><span class="params">()</span></span>;         <span class="comment">//定义createFragemnt的抽象函数</span></div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_fragment);</div><div class="line">        android.support.v4.app.FragmentManager fm=getSupportFragmentManager();</div><div class="line">        Fragment fragment =fm.findFragmentById(R.id.fragmentContainer);</div><div class="line">        <span class="keyword">if</span>(fragment==<span class="keyword">null</span>)</div><div class="line">        &#123;</div><div class="line">            fragment=createFragment();                                        <span class="comment">//抽象函数获得fragment 在子类中便可具体实现</span></div><div class="line">            fm.beginTransaction().add(R.id.fragmentContainer,fragment).commit();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrimeActivity</span> <span class="keyword">extends</span> <span class="title">SingleFragmentActivity</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line">   </div><div class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> CrimeFragment();  <span class="comment">//整洁多了吧</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/19/原-Fragment的实现方案/" class="archive-article-date">
  	<time datetime="2016-09-19T07:45:21.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-19</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fragment/">fragment</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-转-单例设计模式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/12/转-单例设计模式/">[转]单例设计模式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>版权声明：本文为 stormzhang 原创文章，可以随意转载，但必须在明确位置注明出处！！！</p>
<p>经常有人问我说Android学习如何进阶？不管你怎么走，设计模式可谓是进阶必备，对设计模式的理解与运用对你之后的代码书写与架构设计有很多的帮助作用，那么从今天开始我就抽时间来给大家分享下设计模式系列。</p>
<p>什么是设计模式？其实简单的理解就是前人留下来的一些经验总结而已，然后把这些经验起了个名字叫Design Pattern，翻译过来就是设计模式的意思，通过使用设计模式可以让我们的代码复用性更高，可维护性更高，让你的代码写的更优雅。设计模式理论上有23种，但是我只会针对Android平台上常用的一些设计模式做分享，今天就先来分享下最常用的单例模式。</p>
<p>饿汉式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>饿汉式 是最简单的实现方式，这种实现方式适合那些在初始化时就要用到单例的情况，这种方式简单粗暴，如果单例对象初始化非常快，而且占用内存非常小的时候这种方式是比较合适的，可以直接在应用启动时加载并初始化。 但是，如果单例初始化的操作耗时比较长而应用对于启动速度又有要求，或者单例的占用内存比较大，再或者单例只是在某个特定场景的情况下才会被使用，而一般情况下是不会使用时，使用饿汉式的单例模式就是不合适的，这时候就需要用到懒汉式的方式去按需延迟加载单例。</p>
<p>懒汉式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> == instance)&#123;</div><div class="line">            instance = <span class="keyword">new</span> Singleton();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>懒汉式与饿汉式的最大区别就是将单例的初始化操作，延迟到需要的时候才进行，这样做在某些场合中有很大用处。比如某个单例用的次数不是很多，但是这个单例提供的功能又非常复杂，而且加载和初始化要消耗大量的资源，这个时候使用懒汉式就是非常不错的选择。</p>
<p>多线程下的单例模式</p>
<p>上面介绍了一些单例模式的基本应用方法，但是上面所说的那些使用方式都是有一个隐含的前提，那就是他们都是应用在单线程条件下，一旦换成了多线程就有出错的风险。</p>
<p>如果在多线程的情况下，饿汉式不会出现问题，因为JVM只会加载一次单例类，但是懒汉式可能就会出现重复创建单例对象的问题。为什么会有这样的问题呢？因为懒汉式在创建单例时是 线程不安全的，多个线程可能会并发调用他的newInstance方法导致多个线程可能会创建多份相同的单例出来。</p>
<p>那有没有办法，使懒汉式的单利模式也是线程安全的呢？答案肯定是有的，就是使用加同步锁的方式去实现。</p>
<p>懒汉式同步锁<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">null</span>;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">synchronized</span> (Singleton.class) &#123;</div><div class="line">            <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                instance = <span class="keyword">new</span> Singleton();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这种是最常见的解决同步问题的一种方式，使用同步锁synchronized (Singleton.class)防止多线程同时进入造成instance被多次实例化。举个在Android使用这种方式的例子：</p>
<p>InputMethodManager示例<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">InputMethodManager</span> </span>&#123;</div><div class="line">    <span class="comment">//内部全局唯一实例  </span></div><div class="line">    <span class="keyword">static</span> InputMethodManager sInstance;</div><div class="line">   </div><div class="line">    <span class="comment">//对外api  </span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> InputMethodManager <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">synchronized</span> (InputMethodManager.class) &#123;</div><div class="line">            <span class="keyword">if</span> (sInstance == <span class="keyword">null</span>) &#123;</div><div class="line">                IBinder b = ServiceManager.getService(Context.INPUT_METHOD_SERVICE);</div><div class="line">                IInputMethodManager service = IInputMethodManager.Stub.asInterface(b);</div><div class="line">                sInstance = <span class="keyword">new</span> InputMethodManager(service, Looper.getMainLooper());</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">return</span> sInstance;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以上是Android源码中输入法类相关的单例使用方式。</p>
<p>但其实还有一种更好的方式如下：</p>
<p>双重校验锁<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance = <span class="keyword">null</span>;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// if already inited, no need to get lock everytime</span></div><div class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</div><div class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</div><div class="line">                    instance = <span class="keyword">new</span> Singleton();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> instance;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可以看到上面在synchronized (Singleton.class)外又添加了一层if，这是为了在instance已经实例化后下次进入不必执行synchronized (Singleton.class)获取对象锁，从而提高性能。</p>
<p>以上两种方式还是挺麻烦的，我们不禁要问，有没有更好的实现方式呢？答案是肯定的。 我们可以利用JVM的类加载机制去实现。在很多情况下JVM已经为我们提供了同步控制，比如：</p>
<p>在static{}区块中初始化的数据<br>访问final字段时<br>等等<br>因为在JVM进行类加载的时候他会保证数据是同步的，我们可以这样实现：</p>
<p>采用内部类，在这个内部类里面去创建对象实例。这样的话，只要应用中不使用内部类 JVM 就不会去加载这个单例类，也就不会创建单例对象，从而实现懒汉式的延迟加载和线程安全。</p>
<p>实现代码如下：</p>
<p>静态内部类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span></span>&#123;</div><div class="line">    <span class="comment">//内部类，在装载该内部类时才会去创建单利对象</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span></span>&#123;</div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;&#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">newInstance</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="keyword">return</span> SingletonHolder.instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="comment">//do something</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样实现出来的单例类就是线程安全的，而且使用起来很简洁，麻麻再也不用担心我的单例不是单例了。</p>
<p>然而这还不是最简单的方式，Effective Java中推荐了一种更简洁方便的使用方式，就是使用枚举。</p>
<p>枚举类型单例模式<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton&#123;</div><div class="line">    <span class="comment">//定义一个枚举的元素，它就是Singleton的一个实例</span></div><div class="line">    instance;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>&#123;</div><div class="line">        <span class="comment">// do something ...</span></div><div class="line">    &#125;    </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用方法如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">   Singleton singleton = Singleton.instance;</div><div class="line">   singleton.doSomething();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>默认枚举实例的创建是线程安全的.(创建枚举类的单例在JVM层面也是能保证线程安全的), 所以不需要担心线程安全的问题，所以理论上枚举类来实现单例模式是最简单的方式。</p>
<p>总结</p>
<p>一般单例模式包含了5种写法，分别是饿汉、懒汉、双重校验锁、静态内部类和枚举。相信看完之后你对单例模式有了充分的理解了，根据不同的场景选择最你最喜欢的一种单例模式吧！</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/12/转-单例设计模式/" class="archive-article-date">
  	<time datetime="2016-09-12T05:56:36.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-12</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/设计模式/">设计模式</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-转-关于fragment" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/12/转-关于fragment/">[转]关于fragment</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
<div></div><div><br><br><span>目录<a href="#" title="系统根据文章中H1到H6标签自动生成文章目录">(?)</a></span><a href="#" title="展开">[+]</a><br><br>1.  <a href="#t0">Fragment的产生与介绍</a><br>2.  <a href="#t1">Fragment的生命周期</a><br>3.  <a href="#t2">静态的使用Fragment</a><br>4.  <a href="#t3">动态的使用Fragment</a><br>5.  <a href="#t4">Fragment家族常用的API</a><br>6.  <a href="#t5"></a></div><div></div><div id="article_content" class="article_content"><br><br>转载请标明出处：<a href="http://blog.csdn.net/lmj623565791/article/details/37970961" target="_blank" rel="external">http://blog.csdn.net/lmj623565791/article/details/37970961</a><br><br>自从Fragment出现，曾经有段时间，感觉大家谈什么都能跟Fragment谈上关系，做什么都要问下Fragment能实现不<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">本篇博客力求为大家说明Fragment如何产生，什么是Fragment，Fragment生命周期，如何静态和动态的使用Fragment，Fragment回退栈，Fragment事务；以及Fragment的一些特殊用途，例如：没有布局的Fragment有何用处？Fragment如何与Activity交互？Fragment如何创建对话框？Fragment如何与ActionBar集成等等。</div><div class="line"></div><div class="line">###### &lt;a&gt;&lt;/a&gt;&lt;span&gt;1、Fragment的产生与介绍&lt;/span&gt;</div><div class="line"></div><div class="line">&lt;span&gt;&lt;/span&gt;Android运行在各种各样的设备中，有小屏幕的手机，超大屏的平板甚至电视。针对屏幕尺寸的差距，很多情况下，都是先针对手机开发一套App，然后拷贝一份，修改布局以适应平板神马超级大屏的。难道无法做到一个App可以同时适应手机和平板么，当然了，必须有啊。Fragment的出现就是为了解决这样的问题。你可以把Fragment当成Activity的一个界面的一个组成部分，甚至Activity的界面可以完全有不同的Fragment组成，更帅气的是Fragment拥有自己的生命周期和接收、处理用户的事件，这样就不必在Activity写一堆控件的事件处理的代码了。更为重要的是，你可以动态的添加、替换和移除某个Fragment。</div><div class="line"></div><div class="line">###### &lt;a&gt;&lt;/a&gt;&lt;span&gt;2、Fragment的生命周期&lt;/span&gt;</div><div class="line"></div><div class="line">&lt;span&gt;&lt;/span&gt;Fragment必须是依存与Activity而存在的，因此Activity的生命周期会直接影响到Fragment的生命周期。官网这张图很好的说明了两者生命周期的关系：</div><div class="line"></div><div class="line">![](http://img.blog.csdn.net/20140719225005356?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbG1qNjIzNTY1Nzkx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)</div><div class="line"></div><div class="line">可以看到Fragment比Activity多了几个额外的生命周期回调方法：</div><div class="line">**onAttach(Activity)**</div><div class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;当Fragment与Activity发生关联时调用。</div><div class="line">**onCreateView(LayoutInflater, ViewGroup,Bundle)**</div><div class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;创建该Fragment的视图</div><div class="line">**onActivityCreated(Bundle)**</div><div class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;当Activity的onCreate方法返回时调用</div><div class="line">**onDestoryView()**</div><div class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;与onCreateView想对应，当该Fragment的视图被移除时调用</div><div class="line">**onDetach()**</div><div class="line">&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;与onAttach相对应，当Fragment与Activity关联被取消时调用</div><div class="line">注意：除了onCreateView，其他的所有方法如果你重写了，必须调用父类对于该方法的实现，</div><div class="line"></div><div class="line">###### &lt;a&gt;&lt;/a&gt;&lt;span&gt;3、静态的使用Fragment&lt;/span&gt;</div><div class="line"></div><div class="line">嘿嘿，终于到使用的时刻了~~</div><div class="line"></div><div class="line">这是使用Fragment最简单的一种方式，把Fragment当成普通的控件，直接写在Activity的布局文件中。步骤：</div><div class="line"></div><div class="line">**1、继承Fragment，重写onCreateView决定Fragemnt的布局**</div><div class="line"></div><div class="line">**2、在Activity中声明此Fragment，就当和普通的View一样**</div><div class="line"></div><div class="line">下面展示一个例子（我使用2个Fragment作为Activity的布局，一个Fragment用于标题布局，一个Fragment用于内容布局）：</div><div class="line"></div><div class="line">TitleFragment的布局文件:</div><div class="line">&lt;div class=&quot;dp-highlighter bg_html&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[html]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;xml&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;version&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“1.0”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;encoding&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“utf-8”&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;RelativeLayout&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;xmlns:android&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“http://schemas.android.com/apk/res/android”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“45dp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:background&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@drawable/title_bar”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;ImageButton&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@+id/id_title_left_btn”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“wrap_content”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“wrap_content”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_centerVertical&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“true”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_marginLeft&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“3dp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:background&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@drawable/showleft_selector”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;TextView&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:gravity&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“center”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:text&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“我不是微信”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">20.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:textColor&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“#fff”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">21.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:textSize&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“20sp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">22.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:textStyle&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“bold”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">23.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">24.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;RelativeLayout&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;html&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;</div><div class="line">&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;45dp&quot;</div><div class="line">    android:background=&quot;@drawable/title_bar&quot; &amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;ImageButton</div><div class="line">        android:id=&quot;@+id/id_title_left_btn&quot;</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_centerVertical=&quot;true&quot;</div><div class="line">        android:layout_marginLeft=&quot;3dp&quot;</div><div class="line">        android:background=&quot;@drawable/showleft_selector&quot; /&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;TextView</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;fill_parent&quot;</div><div class="line">        android:gravity=&quot;center&quot;</div><div class="line">        android:text=&quot;我不是微信&quot;</div><div class="line">        android:textColor=&quot;#fff&quot;</div><div class="line">        android:textSize=&quot;20sp&quot;</div><div class="line">        android:textStyle=&quot;bold&quot; /&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/RelativeLayout&amp;gt;&lt;/pre&gt;</div><div class="line">TitleFragment&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt;&lt;span&gt;&amp;nbsp;com.zhy.zhy_fragments;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.Fragment;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.os.Bundle;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.LayoutInflater;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View.OnClickListener;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.ViewGroup;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.widget.ImageButton;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.widget.Toast;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;TitleFragment&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt;&lt;span&gt;&amp;nbsp;Fragment&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;ImageButton&amp;nbsp;mLeftMenu;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;View&amp;nbsp;onCreateView(LayoutInflater&amp;nbsp;inflater,&amp;nbsp;ViewGroup&amp;nbsp;container,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bundle&amp;nbsp;savedInstanceState)&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">20.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">21.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;View&amp;nbsp;view&amp;nbsp;=&amp;nbsp;inflater.inflate(R.layout.fragment_title,&amp;nbsp;container,&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">22.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mLeftMenu&amp;nbsp;=&amp;nbsp;(ImageButton)&amp;nbsp;view.findViewById(R.id.id_title_left_btn);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">23.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mLeftMenu.setOnClickListener(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;OnClickListener()&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">24.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">25.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">26.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;&lt;span&gt;&amp;nbsp;onClick(View&amp;nbsp;v)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">27.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">28.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Toast.makeText(getActivity(),&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">29.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;string&quot;&gt;”i&amp;nbsp;am&amp;nbsp;an&amp;nbsp;ImageButton&amp;nbsp;in&amp;nbsp;TitleFragment&amp;nbsp;!&amp;nbsp;”&lt;/span&gt;&lt;span&gt;,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">30.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Toast.LENGTH_SHORT).show();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">31.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">32.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">33.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;span&gt;&amp;nbsp;view;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">34.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">35.  &lt;span&gt;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;package com.zhy.zhy_fragments;</div><div class="line"></div><div class="line">import android.app.Fragment;</div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.LayoutInflater;</div><div class="line">import android.view.View;</div><div class="line">import android.view.View.OnClickListener;</div><div class="line">import android.view.ViewGroup;</div><div class="line">import android.widget.ImageButton;</div><div class="line">import android.widget.Toast;</div><div class="line"></div><div class="line">public class TitleFragment extends Fragment</div><div class="line">&#123;</div><div class="line"></div><div class="line">    private ImageButton mLeftMenu;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container,</div><div class="line">            Bundle savedInstanceState)</div><div class="line">    &#123;</div><div class="line">        View view = inflater.inflate(R.layout.fragment_title, container, false);</div><div class="line">        mLeftMenu = (ImageButton) view.findViewById(R.id.id_title_left_btn);</div><div class="line">        mLeftMenu.setOnClickListener(new OnClickListener()</div><div class="line">        &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View v)</div><div class="line">            &#123;</div><div class="line">                Toast.makeText(getActivity(),</div><div class="line">                        &quot;i am an ImageButton in TitleFragment ! &quot;,</div><div class="line">                        Toast.LENGTH_SHORT).show();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        return view;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">&lt;/pre&gt;</div><div class="line">同理还有ContentFragment的其布局文件：&lt;div class=&quot;dp-highlighter bg_html&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[html]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;?&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;xml&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;version&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“1.0”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;encoding&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“utf-8”&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;?&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;xmlns:android&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“http://schemas.android.com/apk/res/android”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:orientation&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“vertical”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;TextView&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:gravity&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“center”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:text&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“使用Fragment做主面板”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:textSize&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“20sp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:textStyle&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“bold”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;LinearLayout&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;html&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;</div><div class="line">&amp;lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot; &amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;TextView</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;fill_parent&quot;</div><div class="line">        android:gravity=&quot;center&quot;</div><div class="line">        android:text=&quot;使用Fragment做主面板&quot;</div><div class="line">        android:textSize=&quot;20sp&quot;</div><div class="line">        android:textStyle=&quot;bold&quot; /&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/LinearLayout&amp;gt;&lt;/pre&gt;</div><div class="line">&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt;&lt;span&gt;&amp;nbsp;com.zhy.zhy_fragments;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.Fragment;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.os.Bundle;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.LayoutInflater;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.ViewGroup;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;ContentFragment&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt;&lt;span&gt;&amp;nbsp;Fragment&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;View&amp;nbsp;onCreateView(LayoutInflater&amp;nbsp;inflater,&amp;nbsp;ViewGroup&amp;nbsp;container,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bundle&amp;nbsp;savedInstanceState)&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;span&gt;&amp;nbsp;inflater.inflate(R.layout.fragment_content,&amp;nbsp;container,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;package com.zhy.zhy_fragments;</div><div class="line"></div><div class="line">import android.app.Fragment;</div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.LayoutInflater;</div><div class="line">import android.view.View;</div><div class="line">import android.view.ViewGroup;</div><div class="line"></div><div class="line">public class ContentFragment extends Fragment</div><div class="line">&#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container,</div><div class="line">            Bundle savedInstanceState)</div><div class="line">    &#123;</div><div class="line">        return inflater.inflate(R.layout.fragment_content, container, false);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&lt;/pre&gt;</div><div class="line">MainActivity&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt;&lt;span&gt;&amp;nbsp;com.zhy.zhy_fragments;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.Activity;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.os.Bundle;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.Window;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;MainActivity&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt;&lt;span&gt;&amp;nbsp;Activity&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;&lt;span&gt;&amp;nbsp;onCreate(Bundle&amp;nbsp;savedInstanceState)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;&lt;span&gt;.onCreate(savedInstanceState);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requestWindowFeature(Window.FEATURE_NO_TITLE);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;setContentView(R.layout.activity_main);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;package com.zhy.zhy_fragments;</div><div class="line"></div><div class="line">import android.app.Activity;</div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.Window;</div><div class="line"></div><div class="line">public class MainActivity extends Activity</div><div class="line">&#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState)</div><div class="line">    &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        requestWindowFeature(Window.FEATURE_NO_TITLE);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&lt;/pre&gt;</div><div class="line">Activity的布局文件：&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span&gt;&amp;lt;RelativeLayout&amp;nbsp;xmlns:android=&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;“http://schemas.android.com/apk/res/android”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;xmlns:tools=&lt;span class=&quot;string&quot;&gt;”http://schemas.android.com/tools”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_width=&lt;span class=&quot;string&quot;&gt;”match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_height=&lt;span class=&quot;string&quot;&gt;”match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;fragment&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:id=&lt;span class=&quot;string&quot;&gt;”@+id/id_fragment_title”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:name=&lt;span class=&quot;string&quot;&gt;”com.zhy.zhy_fragments.TitleFragment”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_width=&lt;span class=&quot;string&quot;&gt;”fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_height=&lt;span class=&quot;string&quot;&gt;”45dp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;/&amp;gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;fragment&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_below=&lt;span class=&quot;string&quot;&gt;”@id/id_fragment_title”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:id=&lt;span class=&quot;string&quot;&gt;”@+id/id_fragment_content”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:name=&lt;span class=&quot;string&quot;&gt;”com.zhy.zhy_fragments.ContentFragment”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_width=&lt;span class=&quot;string&quot;&gt;”fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;android:layout_height=&lt;span class=&quot;string&quot;&gt;”fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;/&amp;gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&amp;lt;/RelativeLayout&amp;gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot; &amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;fragment</div><div class="line">        android:id=&quot;@+id/id_fragment_title&quot;</div><div class="line">        android:name=&quot;com.zhy.zhy_fragments.TitleFragment&quot;</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;45dp&quot; /&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;fragment</div><div class="line">        android:layout_below=&quot;@id/id_fragment_title&quot;</div><div class="line">        android:id=&quot;@+id/id_fragment_content&quot;</div><div class="line">        android:name=&quot;com.zhy.zhy_fragments.ContentFragment&quot;</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;fill_parent&quot; /&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/RelativeLayout&amp;gt;&lt;/pre&gt;</div><div class="line">是不是把Fragment当成普通的View一样声明在Activity的布局文件中，然后所有控件的事件处理等代码都由各自的Fragment去处理，瞬间觉得Activity好干净有木有~~代码的可读性、复用性以及可维护性是不是瞬间提升了~~~下面看下效果图：</div><div class="line"></div><div class="line">![](http://img.blog.csdn.net/20140719230904593)</div><div class="line"></div><div class="line">###### &lt;a&gt;&lt;/a&gt;&lt;span&gt;4、动态的使用Fragment&lt;/span&gt;</div><div class="line"></div><div class="line">上面已经演示了，最简单的使用Fragment的方式~下面介绍如何动态的添加、更新、以及删除Fragment</div><div class="line"></div><div class="line">为了动态使用Fragment，我们修改一下Actvity的布局文件，中间使用一个FrameLayout，下面添加四个按钮~~~嘿嘿~~不是微信的按钮- -！</div><div class="line">&lt;div class=&quot;dp-highlighter bg_html&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[html]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;RelativeLayout&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;attribute&quot;&gt;xmlns:android&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“http://schemas.android.com/apk/res/android”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;xmlns:tools&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“http://schemas.android.com/tools”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“match_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;fragment&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@+id/id_fragment_title”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“com.zhy.zhy_fragments.TitleFragment”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“45dp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;include&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@+id/id_ly_bottombar”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“55dp”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_alignParentBottom&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“true”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;layout&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@layout/bottombar”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;FrameLayout&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">20.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:id&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@+id/id_content”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">21.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_width&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">22.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_height&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“fill_parent”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">23.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_above&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@id/id_ly_bottombar”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">24.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;attribute&quot;&gt;android:layout_below&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span class=&quot;attribute-value&quot;&gt;“@id/id_fragment_title”&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">25.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">26.  &lt;span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;tag-name&quot;&gt;RelativeLayout&lt;/span&gt;&lt;span class=&quot;tag&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;html&quot;&gt;&amp;lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot; &amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;fragment</div><div class="line">        android:id=&quot;@+id/id_fragment_title&quot;</div><div class="line">        android:name=&quot;com.zhy.zhy_fragments.TitleFragment&quot;</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;45dp&quot; /&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;include</div><div class="line">        android:id=&quot;@+id/id_ly_bottombar&quot;</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;55dp&quot;</div><div class="line">        android:layout_alignParentBottom=&quot;true&quot;</div><div class="line">        layout=&quot;@layout/bottombar&quot; /&amp;gt;</div><div class="line"></div><div class="line">    &amp;lt;FrameLayout</div><div class="line">        android:id=&quot;@+id/id_content&quot;</div><div class="line">        android:layout_width=&quot;fill_parent&quot;</div><div class="line">        android:layout_height=&quot;fill_parent&quot;</div><div class="line">        android:layout_above=&quot;@id/id_ly_bottombar&quot;</div><div class="line">        android:layout_below=&quot;@id/id_fragment_title&quot; /&amp;gt;</div><div class="line"></div><div class="line">&amp;lt;/RelativeLayout&amp;gt;&lt;/pre&gt;</div><div class="line">底部四个按钮的布局就不贴了，到时看效果图就明白了~~</div><div class="line"></div><div class="line">下面主Activity</div><div class="line">&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt;&lt;span&gt;&amp;nbsp;com.zhy.zhy_fragments;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.Activity;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.FragmentManager;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.FragmentTransaction;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.os.Bundle;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View.OnClickListener;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.Window;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.widget.LinearLayout;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;MainActivity&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt;&lt;span&gt;&amp;nbsp;Activity&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;implements&lt;/span&gt;&lt;span&gt;&amp;nbsp;OnClickListener&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;LinearLayout&amp;nbsp;mTabWeixin;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;LinearLayout&amp;nbsp;mTabFriend;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;ContentFragment&amp;nbsp;mWeixin;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;FriendFragment&amp;nbsp;mFriend;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">20.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">21.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;protected&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;&lt;span&gt;&amp;nbsp;onCreate(Bundle&amp;nbsp;savedInstanceState)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">22.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">23.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;&lt;span&gt;.onCreate(savedInstanceState);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">24.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;requestWindowFeature(Window.FEATURE_NO_TITLE);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">25.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;setContentView(R.layout.activity_main);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">26.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">27.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;初始化控件和声明事件&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">28.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mTabWeixin&amp;nbsp;=&amp;nbsp;(LinearLayout)&amp;nbsp;findViewById(R.id.tab_bottom_weixin);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">29.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mTabFriend&amp;nbsp;=&amp;nbsp;(LinearLayout)&amp;nbsp;findViewById(R.id.tab_bottom_friend);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">30.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mTabWeixin.setOnClickListener(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">31.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mTabFriend.setOnClickListener(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">32.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">33.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;设置默认的Fragment&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">34.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;setDefaultFragment();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">35.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">36.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">37.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;&lt;span&gt;&amp;nbsp;setDefaultFragment()&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">38.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">39.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FragmentManager&amp;nbsp;fm&amp;nbsp;=&amp;nbsp;getFragmentManager();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">40.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FragmentTransaction&amp;nbsp;transaction&amp;nbsp;=&amp;nbsp;fm.beginTransaction();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">41.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mWeixin&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;ContentFragment();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">42.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;transaction.replace(R.id.id_content,&amp;nbsp;mWeixin);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">43.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;transaction.commit();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">44.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">45.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">46.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">47.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;&lt;span&gt;&amp;nbsp;onClick(View&amp;nbsp;v)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">48.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">49.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FragmentManager&amp;nbsp;fm&amp;nbsp;=&amp;nbsp;getFragmentManager();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">50.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;开启Fragment事务&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">51.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;FragmentTransaction&amp;nbsp;transaction&amp;nbsp;=&amp;nbsp;fm.beginTransaction();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">52.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">53.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt;&lt;span&gt;&amp;nbsp;(v.getId())&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">54.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">55.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;&lt;span&gt;&amp;nbsp;R.id.tab_bottom_weixin:&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">56.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span&gt;&amp;nbsp;(mWeixin&amp;nbsp;==&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;&lt;span&gt;)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">57.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">58.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mWeixin&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;ContentFragment();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">59.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">60.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;使用当前Fragment的布局替代id_content的控件&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">61.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;transaction.replace(R.id.id_content,&amp;nbsp;mWeixin);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">62.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;span&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">63.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt;&lt;span&gt;&amp;nbsp;R.id.tab_bottom_friend:&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">64.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;&lt;span&gt;&amp;nbsp;(mFriend&amp;nbsp;==&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;&lt;span&gt;)&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">65.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">66.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;mFriend&amp;nbsp;=&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;&lt;span&gt;&amp;nbsp;FriendFragment();&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">67.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">68.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;transaction.replace(R.id.id_content,&amp;nbsp;mFriend);&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">69.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;&lt;span&gt;;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">70.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">71.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;transaction.addToBackStack();&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">72.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;comment&quot;&gt;//&amp;nbsp;事务提交&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">73.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;transaction.commit();&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">74.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">75.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">76.  &lt;span&gt;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;package com.zhy.zhy_fragments;</div><div class="line"></div><div class="line">import android.app.Activity;</div><div class="line">import android.app.FragmentManager;</div><div class="line">import android.app.FragmentTransaction;</div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.View;</div><div class="line">import android.view.View.OnClickListener;</div><div class="line">import android.view.Window;</div><div class="line">import android.widget.LinearLayout;</div><div class="line"></div><div class="line">public class MainActivity extends Activity implements OnClickListener</div><div class="line">&#123;</div><div class="line">    private LinearLayout mTabWeixin;</div><div class="line">    private LinearLayout mTabFriend;</div><div class="line"></div><div class="line">    private ContentFragment mWeixin;</div><div class="line">    private FriendFragment mFriend;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(Bundle savedInstanceState)</div><div class="line">    &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        requestWindowFeature(Window.FEATURE_NO_TITLE);</div><div class="line">        setContentView(R.layout.activity_main);</div><div class="line"></div><div class="line">        // 初始化控件和声明事件</div><div class="line">        mTabWeixin = (LinearLayout) findViewById(R.id.tab_bottom_weixin);</div><div class="line">        mTabFriend = (LinearLayout) findViewById(R.id.tab_bottom_friend);</div><div class="line">        mTabWeixin.setOnClickListener(this);</div><div class="line">        mTabFriend.setOnClickListener(this);</div><div class="line"></div><div class="line">        // 设置默认的Fragment</div><div class="line">        setDefaultFragment();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void setDefaultFragment()</div><div class="line">    &#123;</div><div class="line">        FragmentManager fm = getFragmentManager();</div><div class="line">        FragmentTransaction transaction = fm.beginTransaction();</div><div class="line">        mWeixin = new ContentFragment();</div><div class="line">        transaction.replace(R.id.id_content, mWeixin);</div><div class="line">        transaction.commit();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void onClick(View v)</div><div class="line">    &#123;</div><div class="line">        FragmentManager fm = getFragmentManager();</div><div class="line">        // 开启Fragment事务</div><div class="line">        FragmentTransaction transaction = fm.beginTransaction();</div><div class="line"></div><div class="line">        switch (v.getId())</div><div class="line">        &#123;</div><div class="line">        case R.id.tab_bottom_weixin:</div><div class="line">            if (mWeixin == null)</div><div class="line">            &#123;</div><div class="line">                mWeixin = new ContentFragment();</div><div class="line">            &#125;</div><div class="line">            // 使用当前Fragment的布局替代id_content的控件</div><div class="line">            transaction.replace(R.id.id_content, mWeixin);</div><div class="line">            break;</div><div class="line">        case R.id.tab_bottom_friend:</div><div class="line">            if (mFriend == null)</div><div class="line">            &#123;</div><div class="line">                mFriend = new FriendFragment();</div><div class="line">            &#125;</div><div class="line">            transaction.replace(R.id.id_content, mFriend);</div><div class="line">            break;</div><div class="line">        &#125;</div><div class="line">        // transaction.addToBackStack();</div><div class="line">        // 事务提交</div><div class="line">        transaction.commit();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&lt;/pre&gt;</div><div class="line">可以看到我们使用FragmentManager对Fragment进行了动态的加载，这里使用的是replace方法~~下一节我会详细介绍FragmentManager的常用API。</div><div class="line"></div><div class="line">注：如果使用Android3.0以下的版本，需要引入v4的包，然后Activity继承FragmentActivity，然后通过getSupportFragmentManager获得FragmentManager。不过还是建议版Menifest文件的uses-sdk的minSdkVersion和targetSdkVersion都改为11以上，这样就不必引入v4包了。</div><div class="line"></div><div class="line">代码中间还有两个Fragment的子类，ContentFragment上面已经见过，FriendFragment其实类似：</div><div class="line">&lt;div class=&quot;dp-highlighter bg_java&quot;&gt;&lt;div class=&quot;bar&quot;&gt;&lt;div class=&quot;tools&quot;&gt;**[java]** [view plain](# &quot;view plain&quot;)&lt;span&gt; [copy](# &quot;copy&quot;)&lt;/span&gt;&lt;div&gt;&lt;/div&gt;&lt;span&gt; [print](# &quot;print&quot;)&lt;/span&gt;[?](# &quot;?&quot;)&lt;/div&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">1.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;package&lt;/span&gt;&lt;span&gt;&amp;nbsp;com.zhy.zhy_fragments;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">2.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">3.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.app.Fragment;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">4.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.os.Bundle;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">5.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.LayoutInflater;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">6.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.View;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">7.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt;&lt;span&gt;&amp;nbsp;android.view.ViewGroup;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">8.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">9.  &lt;span&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt;&lt;span&gt;&amp;nbsp;FriendFragment&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt;&lt;span&gt;&amp;nbsp;Fragment&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">10.  &lt;span&gt;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">11.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">12.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;annotation&quot;&gt;@Override&lt;/span&gt;&lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">13.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;&lt;span&gt;&amp;nbsp;View&amp;nbsp;onCreateView(LayoutInflater&amp;nbsp;inflater,&amp;nbsp;ViewGroup&amp;nbsp;container,&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">14.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Bundle&amp;nbsp;savedInstanceState)&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">15.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#123;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">16.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;&lt;span&gt;&amp;nbsp;inflater.inflate(R.layout.fragment_friend,&amp;nbsp;container,&amp;nbsp;&lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;&lt;span&gt;);&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;</div><div class="line">17.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">18.  &lt;span&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;</div><div class="line">19.  &lt;span&gt;&#125;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;div class=&quot;save_code tracking-ad&quot;&gt;&lt;a&gt;![](http://static.blog.csdn.net/images/save_snippets.png)&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;pre class=&quot;java&quot;&gt;package com.zhy.zhy_fragments;</div><div class="line"></div><div class="line">import android.app.Fragment;</div><div class="line">import android.os.Bundle;</div><div class="line">import android.view.LayoutInflater;</div><div class="line">import android.view.View;</div><div class="line">import android.view.ViewGroup;</div><div class="line"></div><div class="line">public class FriendFragment extends Fragment</div><div class="line">&#123;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container,</div><div class="line">            Bundle savedInstanceState)</div><div class="line">    &#123;</div><div class="line">        return inflater.inflate(R.layout.fragment_friend, container, false);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">&lt;/pre&gt;</div><div class="line">效果图：</div><div class="line"></div><div class="line">![](http://img.blog.csdn.net/20140720002532641)</div><div class="line"></div><div class="line">可以看到很好的实现了效果，其实这个效果以前的博客中也出现过，在博客：[Android项目Tab类型主界面大总结 Fragment+TabPageIndicator+ViewPager](http://blog.csdn.net/lmj623565791/article/details/24740977)，有兴趣可以看看。ps:为了代码的简洁，就不添加按钮的点击变化什么的了，主要讲解功能了</div></pre></td></tr></table></figure><br><br>###### <a></a><span>5、Fragment家族常用的API</span><br><br>Fragment常用的三个类：<br><br>android.app.Fragment 主要用于定义Fragment<br><br>android.app.FragmentManager 主要用于在Activity中操作Fragment<br><br>android.app.FragmentTransaction 保证一些列Fragment操作的原子性，熟悉事务这个词，一定能明白~<br><br><strong>a、获取FragmentManage的方式：</strong><br><br>getFragmentManager() // v4中，getSupportFragmentManager<br><br><strong>b、主要的操作都是FragmentTransaction的方法</strong><br><br>FragmentTransaction transaction = fm.benginTransatcion();//开启一个事务<br><br><strong>transaction.add()&nbsp;</strong><br><br><span></span><span></span>往Activity中添加一个Fragment<br><br><strong>transaction.remove()<span> </span></strong><br><br><span></span><span></span>从Activity中移除一个Fragment，如果被移除的Fragment没有添加到回退栈（回退栈后面会详细说），这个Fragment实例将会被销毁。<br><br><strong>transaction.replace()</strong><br><br><span></span><span></span>使用另一个Fragment替换当前的，实际上就是remove()然后add()的合体~<br><br><strong>transaction.hide()</strong><br><br><span></span><span></span>隐藏当前的Fragment，仅仅是设为不可见，并不会销毁<br><br><strong>transaction.show()</strong><br><br><span></span><span></span>显示之前隐藏的Fragment<br><br><strong>detach()</strong><br><br>会将view从UI中移除,和remove()不同,此时fragment的状态依然由FragmentManager维护。<br><br><strong>attach()</strong><br><br>重建view视图，附加到UI上并显示。<br><br>transatcion.commit()//提交一个事务<br><br>注意：常用Fragment的哥们，可能会经常遇到这样Activity状态不一致：State loss这样的错误。主要是因为：commit方法一定要在Activity.onSaveInstance()之前调用。<br><br>上述，基本是操作Fragment的所有的方式了，在一个事务开启到提交可以进行多个的添加、移除、替换等操作。<br><br>值得注意的是：如果你喜欢使用Fragment，一定要清楚这些方法，哪个会销毁视图，哪个会销毁实例，哪个仅仅只是隐藏，这样才能更好的使用它们。<br><br><strong>a、比如：我在FragmentA中的EditText填了一些数据，当切换到FragmentB时，如果希望会到A还能看到数据，则适合你的就是hide和show；也就是说，希望保留用户操作的面板，你可以使用hide和show，当然了不要使劲在那new实例，进行下非null判断。</strong><br><br><strong>b、再比如：我不希望保留用户操作，你可以使用remove()，然后add()；或者使用replace()这个和remove,add是相同的效果。</strong><br><br><strong>c、remove和detach有一点细微的区别，在不考虑回退栈的情况下，remove会销毁整个Fragment实例，而detach则只是销毁其视图结构，实例并不会被销毁。那么二者怎么取舍使用呢？如果你的当前Activity一直存在，那么在不希望保留用户操作的时候，你可以优先使用detach。</strong><br><br>上述已经介绍完成了Fragment常用的一些方法，相信看完，大家一定清楚了Fragment的产生理由，以及如何使用Fragment，再根据API的讲解，也能明白，曾经为何觉得Fragment会出现一些列乱七八槽的问题，终究是因为没有弄清楚其生命周期。<br><br>由于篇幅原因，剩下的内容留到下一篇了。在下一篇，会介绍：<br><br>1、如何管理Fragment回退栈<br><br>2、Fragment如何与Activity交互<br><br>3、Fragment与Activity交互的最佳实践<br><br>4、没有视图的Fragment的用处<br><br>5、使用Fragment创建对话框<br><br>6、如何与ActionBar，MenuItem集成等~~<br><br>下一篇：<a href="http://blog.csdn.net/lmj623565791/article/details/37992017" target="_blank" rel="external"><span>Android Fragment 真正的完全解析（下）</span></a><br><br>好了，有任何问题请留言~~<br><br><div>会将view从UI中移除,和remove()不同,此时fragment的状态依然由FragmentManager维护。<br><br><span></span><br><br>### <a></a><br><br></div><br></div>

<!-- Baidu Button BEGIN -->
<div class="bdsharebuttonbox tracking-ad bdshare-button-style0-16"><br><a href="#"></a><br><a href="#" title="分享到QQ空间"></a><br><a href="#" title="分享到新浪微博"></a><br><a href="#" title="分享到腾讯微博"></a><br><a href="#" title="分享到人人网"></a><br><a href="#" title="分享到微信"></a><br></div>

<!-- Baidu Button END -->
<!--172.16.140.12-->
<!-- Baidu Button BEGIN -->
<!-- Baidu Button END -->
<pre><code>&lt;div&gt;
    作者：qq_23974175 发表于2016/9/12 12:21:06 [原文链接](http://blog.csdn.net/qq_23974175/article/details/52512409)
&lt;/div&gt;
&lt;div&gt;
阅读：6 评论：0 [查看评论](http://blog.csdn.net/qq_23974175/article/details/52512409#comments)
&lt;/div&gt;
</code></pre>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/12/转-关于fragment/" class="archive-article-date">
  	<time datetime="2016-09-12T04:21:06.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-12</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fragment/">fragment</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-原-麻烦的素数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/12/原-麻烦的素数/">麻烦的素数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>素数真的是很神奇 求素数更麻烦<br>最傻的方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span>  <span class="title">Prime</span><span class="params">(<span class="keyword">int</span> n)</span>				<span class="comment">//n=25 程序运行时间： 296415ns</span></span></div><div class="line">	&#123;</div><div class="line">		<span class="keyword">boolean</span>  flag;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">2</span> ;i&lt;=n;i++)</div><div class="line">		&#123;	flag=<span class="keyword">true</span>;</div><div class="line">		</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;i;j++)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">if</span>(i%j==<span class="number">0</span>)</div><div class="line">				&#123;		</div><div class="line">					flag=<span class="keyword">false</span>;</div><div class="line">						<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">			&#125;	</div><div class="line">			<span class="keyword">if</span>(flag)</div><div class="line">			&#123;</div><div class="line">			System.out.print(i+<span class="string">" "</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/12/原-麻烦的素数/" class="archive-article-date">
  	<time datetime="2016-09-12T04:09:47.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-12</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Beauty-of-Programming/">Beauty of Programming</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 任天起
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/"
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Beauty-of-Programming/" style="font-size: 16.67px;">Beauty of Programming</a> <a href="/tags/fragment/" style="font-size: 16.67px;">fragment</a> <a href="/tags/mvc/" style="font-size: 13.33px;">mvc</a> <a href="/tags/线程/" style="font-size: 13.33px;">线程</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/随笔/" style="font-size: 13.33px;">随笔</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.google.com.hk/">谷歌</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://stackoverflow.com/">stackoverflow</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">继续跑&lt;br&gt;&lt;br&gt;带着赤子的骄傲</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>