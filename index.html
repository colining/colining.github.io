<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>colin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="colin">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="colin">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="colin">
  
    <link rel="alternative" href="/atom.xml" title="colin" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/0.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">墨</a></h1>
		</hgroup>

		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/colining" title="github">github</a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/ren-tian-qi" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">墨</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/0.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">墨</h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/colining" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/ren-tian-qi" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-volatile" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/07/volatile/">volatile</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><ul>
<li>我相信volatile是非常有必要记录一下的；</li>
</ul>
<h1 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h1><ul>
<li>首先我们知道volatile能保证原子性，但是又不能保证同步，很奇怪吧；但是我写过一个例子，i++；非volatile会存在后面的值比前面小的情况，volatile不存在，只会存在相同的情形；这是为什么呢？<ul>
<li>首先我们假定就是多个cpu，每cpu一个线程，我们知道内存里面放了成堆的数据，cpu每次取要用的放在寄存器里，那么多个线程一起处理一个变量，每个cpu的值很可能就是不一样的；</li>
<li>然后我们的想法是，大家必须都应该是最新的数据，这就要求cpu运行时，做了什么操作，寄存器需要立马回写到内存，而且其他cpu此时不可以写；然后就是一个cpu对变量发生操作，其他cpu所持有的这个变量值就失效；</li>
</ul>
</li>
<li>通过这两个步骤我们就实现了读/写原子性，我们读的时候，这个值一定是最新的，但是加入我们10个线程同时读到最新的值为1，然后同时++；然后再各自写回内存，那么就会出现不同步的情况；但是不会出现后面的值比前面的值小的情况；
        <p class="article-more-link">
          <a  href="/2017/08/07/volatile/#more">more >></a>
        </p>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/08/07/volatile/" class="archive-article-date">
  	<time datetime="2017-08-07T13:53:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-08-07</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/并发/">并发</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-redis 与赞和踩" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/07/redis 与赞和踩/">redis 与赞和踩</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>系统到了要实现赞和踩的阶段了；</li>
</ul>
<h1 id="REDIS"><a href="#REDIS" class="headerlink" title="REDIS"></a>REDIS</h1><ul>
<li>总是听nosql，但还真不懂啊原来nosql真的和传统数据库不一样；是依赖与传统中的集合来的</li>
<li>redis的应用与集合的特性<ul>
<li>hash：在一个hash表里面，键是string，值又是一个hash，然后就可以加很多很多东西；因为hash表本身就可以扩容的嘛；好处就是可以随着对象随便的增多属性或者减少属性；</li>
<li>set 和普通的set一样，用于去重，求交集啥的，都是很厉害的；比如我们的点赞功能，把一群人放在一个集合里，算一下有多少，就得到赞数</li>
<li>sortedset 排序的set，相当于优先队列，搞个什么排行榜的不错</li>
<li>list 一个普通的双向队列，最普通的列表呗</li>
<li>kv ，过期时间啥的
        <p class="article-more-link">
          <a  href="/2017/08/07/redis 与赞和踩/#more">more >></a>
        </p>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/08/07/redis 与赞和踩/" class="archive-article-date">
  	<time datetime="2017-08-07T13:13:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-08-07</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wenda/">wenda</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-计算机网络-运输层" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/24/计算机网络-运输层/">计算机网络-运输层</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><ul>
<li>计算机网络不管怎样，都是一个好难的学科啊；各种纷繁复杂的协议，要考虑的问题也实在是太多了；</li>
</ul>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><ul>
<li>运输层提供逻辑通信，服务主体是应用层的各种应用程序，让我们感觉我们所享用的服务就是自己电脑上的，而实际上却是超级远的地方；</li>
<li>由于运输层是服务于各种应用程序的，所以分解与合并就是必然的；注意分解并不是分解成报文段，报文分解为小的报文段，主要原因是因为网络需求；报文段中的端口号才促使了分解与合并，运输层来来往往一大堆的报文段，将它们准确的发往某个主机的套接字，后者接受到某个套接字上，这才是多路分解的本质；</li>
<li>两家人寄信为例，年龄大的姐姐把信都收到然后分发给其他人，或者收集信，一起发出去</li>
<li>udp套接字是由一个二元组标识的，目的ip和目地端口号；也就是说不管从哪里来的报文段，只要ip+端口一样，处理它们的套接字就一定相同；但是这不代表报文段中就没有端口和ip</li>
<li>tcp套接字有四元组标识，以http为例，要不然大家访问百度，就一个ip+端口，就映射一个套接字，那不累死了；
        <p class="article-more-link">
          <a  href="/2017/07/24/计算机网络-运输层/#more">more >></a>
        </p>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/07/24/计算机网络-运输层/" class="archive-article-date">
  	<time datetime="2017-07-24T11:27:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-07-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/计算机网络/">计算机网络</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-评论中心+站内信" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/23/评论中心+站内信/">评论中心+站内信</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><ul>
<li>没有起因</li>
<li>其实这节课主要是在将web开发中，一个全新功能是怎么一步一步完成的</li>
</ul>
<h1 id="评论中心"><a href="#评论中心" class="headerlink" title="评论中心"></a>评论中心</h1><ul>
<li>数据库中comment的几个索引：<ul>
<li>创建日期所构成的索引</li>
<li>评论实体类型，和评论的id，比如针对问题的评论，问题的id是27，这些就是针对问题27的所有评论，比如针对评论的评论，评论的id也是27，但这量个就有很大的区别了</li>
<li>用户id构成的索引，我们可以轻松的获取一个用户的全部评论，就可以放在用户最近动态里之类的；</li>
</ul>
</li>
<li>在service层调用DAO层时，可以先过滤一下内容</li>
<li>通过entityType和entityId 我们就构建了评论中心，不管是针对什么的评论，在数据库的一张表中就都可以放得下了；
        <p class="article-more-link">
          <a  href="/2017/07/23/评论中心+站内信/#more">more >></a>
        </p>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/07/23/评论中心+站内信/" class="archive-article-date">
  	<time datetime="2017-07-23T11:42:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-07-23</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-wenda/">Java,wenda</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-问题发布与敏感词过滤" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/23/问题发布与敏感词过滤/">问题发布与敏感词过滤</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h1><p>这其实是上节课的内容了，不过还是记录一下好了；</p>
<h2 id="问题发布"><a href="#问题发布" class="headerlink" title="问题发布"></a>问题发布</h2><h3 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h3><ul>
<li>对一个web程序，架构是不变的，service负责拿数据，上层也不在意你是怎么取得的；所以一个功能的实现，要从建立数据库开始，然后是与之对应的model，然后是DAO层，service，然后controller就可以去的数据了，然后再通过model传到页面上，数据量大的话，可以使用ViewObject 来进行传输；</li>
<li>切面可以让我们在业务中横插一刀，不管是打印log信息，还是做什么，都很好用；拦截器则是针对请求，我们可以在拦截器中检验用户状态，也可以进行重定向；</li>
</ul>
<h3 id="部分重点"><a href="#部分重点" class="headerlink" title="部分重点"></a>部分重点</h3><ul>
<li>发布问题其实就是在数据库中添加一条记录，然后刷新页面，页面又会提取几条最新的数据，这样就发布了问题，代码上没什么困难；</li>
<li>问题表有一个created_date的索引，据说如果想要找到一个范围的数据，这个索引还是有用处的；
        <p class="article-more-link">
          <a  href="/2017/07/23/问题发布与敏感词过滤/#more">more >></a>
        </p>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/07/23/问题发布与敏感词过滤/" class="archive-article-date">
  	<time datetime="2017-07-23T10:59:00.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-07-23</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wenda/">wenda</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 墨
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/"
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Android/" style="font-size: 17.5px;">Android</a> <a href="/tags/Beauty-of-Programming/" style="font-size: 15px;">Beauty of Programming</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Java/" style="font-size: 16.25px;">Java</a> <a href="/tags/Java-wenda/" style="font-size: 10px;">Java,wenda</a> <a href="/tags/Java知识点/" style="font-size: 11.25px;">Java知识点</a> <a href="/tags/Java编程思想/" style="font-size: 16.25px;">Java编程思想</a> <a href="/tags/fragment/" style="font-size: 12.5px;">fragment</a> <a href="/tags/mvc/" style="font-size: 11.25px;">mvc</a> <a href="/tags/wenda/" style="font-size: 13.75px;">wenda</a> <a href="/tags/刷题/" style="font-size: 11.25px;">刷题</a> <a href="/tags/剑指Offer/" style="font-size: 18.75px;">剑指Offer</a> <a href="/tags/并发/" style="font-size: 10px;">并发</a> <a href="/tags/笔试/" style="font-size: 10px;">笔试</a> <a href="/tags/算法/" style="font-size: 20px;">算法</a> <a href="/tags/线程/" style="font-size: 11.25px;">线程</a> <a href="/tags/结对编程/" style="font-size: 10px;">结对编程</a> <a href="/tags/计算机网络/" style="font-size: 11.25px;">计算机网络</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/随笔/" style="font-size: 12.5px;">随笔</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.google.com.hk/">谷歌</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://stackoverflow.com/">stackoverflow</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://beyondtech.org/">泡饭</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://menyifan.com/">MYF</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">继续跑&lt;br&gt;&lt;br&gt;带着赤子的骄傲</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>